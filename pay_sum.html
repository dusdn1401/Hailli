<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div id="input_div">
        수량 :
        <input type="text" size="25" value="1" id="count">
        <input type="button" value="-" id="moins" onclick="minus()">
        <input type="button" value="+" id="plus" onclick="plus()">
    </div>
    가격 : <input type="text" value="5000" id="total_count" hidden=hidden />
    <input type="text" value="500" id="total_count_view" />
    <hr />
    <script>
        var count = 1;
        var countEl = document.getElementById("count");
        var total_count = document.getElementById("total_count"); //추가
        var total_count_view = document.getElementById("total_count_view"); //추가

        function plus() {
            count++;
            countEl.value = count;
            total_count_view.value = total_count.value * countEl.value; //추가
        }

        function minus() {

            if (count > 1) {
                count--;
                countEl.value = count;
                total_count_view.value = total_count_view.value - total_count.value; //추가  
            }
        }

    </script>

    <table class="table table-striped table-bordered" id="example">
        <thead>
            <tr>
                <td>ID</td>
                <td>Name</td>
                <td>Price</td>
                <td>Quantity</td>
                <td>Total</td>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>


<script>
    $('#searchName').autocomplete({
       source: '{!! asset('nameAutocomplete') !!}',
       select:function(suggestion,ui){
           event.preventDefault();
           var $tbody = $('#example tbody');
           $tbody.append('<tr><td class="id">' + ui.item.id +
               '</td><td class="name">' + ui.item.value +
               '</td><td class="price" id="price">' + ui.item.price +
               '</td><td><input type="text" id="quantity" value="1"/></td><td><input type="text" id="total" readonly value="'+ui.item.price+'" class="readonly"/></td></tr>');

           $('#quantity').on('keyup',function(){
               var tot = ui.item.price * this.value;
               $('#total').val(tot);
           });  
       }                   
});
    
    
    </script>
</body>

</html>
